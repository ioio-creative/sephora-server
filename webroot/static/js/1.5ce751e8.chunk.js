(this["webpackJsonpsephora-shakeshakegame"]=this["webpackJsonpsephora-shakeshakegame"]||[]).push([[1,5],{19:function(e,t,a){"use strict";a.r(t);var c,n=a(59),o=a(60),s=a(3),r=a(0),i=a(1),l=a(90),d=a(92),u=a(34),h=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(0),s=Object(n.a)(o,2),i=s[0],l=s[1];Object(r.useEffect)((function(){return a&&window.addEventListener("devicemotion",h,!1),function(){window.removeEventListener("devicemotion",h,!1)}}),[a]);var d=[null,null,null],u=Object(r.useRef)(0),h=function(e){var t=0,a=0,c=0;e.acceleration?(t=e.acceleration.x,a=e.acceleration.y,c=e.acceleration.z):(t=e.accelerationIncludingGravity.x,a=e.accelerationIncludingGravity.y,c=e.accelerationIncludingGravity.z);var n=Date.now(),o=n-u.current,s=(Math.abs(t-d[0]),Math.abs(a-d[1]));Math.abs(c-d[2]);Math.sign(d[1])!==Math.sign(a)&&(u.current=n,d=[t,a,c]),s/o>.5&&l((function(e){return e+1}))};return[{moveCounter:i,permissionGranted:a},{requestPermission:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please allow the Device Motion to start the game.\n\u8acb\u5141\u8a31\u4f7f\u7528\u88dd\u7f6e\u52a0\u901f\u8a08\u6b0a\u9650\u4ee5\u9032\u884c\u904a\u6232";"function"===typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((function(t){"granted"==t?c(!0):alert(e)})).catch(console.error):c(!0)},setPermissionGranted:c,setMoveCounter:l}]},j=a(61),m=a.n(j),f=function(e){var t=e.host,a=e.eventListeners,c=e.eventEmitters,n=m()(t,{secure:!1});return n.on("connect",(function(){console.log("connected !"),c.forEach((function(e){var t="function"===typeof e.ack?e.ack:null;n.emit(e.emitter,e.data,t)}))})),a.forEach((function(e){n.on(e.listener,e.callback)})),n};a(33);l.a.registerPlugin(d.a);c={0:"Start"},Object(o.a)(c,"0","Idle"),Object(o.a)(c,1,"WaitForPlayer"),Object(o.a)(c,2,"ModePick"),Object(o.a)(c,3,"WaitForPlayerMode"),Object(o.a)(c,4,"ModeResult"),Object(o.a)(c,5,"GameOneReady"),Object(o.a)(c,6,"GameOnePlay"),Object(o.a)(c,7,"GameoneResult"),Object(o.a)(c,8,"GameTwoReady"),Object(o.a)(c,9,"GameTwoPlay"),Object(o.a)(c,10,"GameTwoResult"),t.default=function(){var e=Object(i.g)().playerId,t=h(),a=Object(n.a)(t,2),c=a[0],o=c.moveCounter,d=c.permissionGranted,j=a[1],m=j.requestPermission,b=j.setMoveCounter,x=Object(r.useState)(""),p=Object(n.a)(x,2),v=p[0],O=p[1];console.log("playerId: ",e);var g=Object(r.useRef)(null),F=Object(r.useRef)(null),y=function(){g.current&&g.current.clear(),g.current=l.a.timeline({repeat:-1,repeatDelay:3}),l.a.set("#mainCircle",{scale:1,autoAlpha:1,transformOrigin:"center"}),l.a.set(".svgCircle",{scaleX:2,scaleY:1,rx:0,transformOrigin:"center"}),l.a.set("#circle1",{autoAlpha:0,r:4}),l.a.set(".scene",{autoAlpha:0}),l.a.set(".scene.scene0",{autoAlpha:1}),l.a.set("#circle1",{r:4}),l.a.set("#circleBackground",{r:0,fill:"none"}),g.current.add(l.a.to(".scene0 .joinGameButton",{rotate:-5,duration:.1,ease:"elastic.out(1, 0.75)"})),g.current.add(l.a.to(".scene0 .joinGameButton",{rotate:0,duration:1,ease:"elastic.out(2, 0.2)"}))},k=function(){g.current&&g.current.clear(),g.current=l.a.timeline({repeat:-1,paused:!0});var e=Array.from(document.querySelectorAll(".svgCircle")).reverse(),t=l.a.timeline();t.add([l.a.to(e,{scaleX:1,scaleY:1,rx:100,autoRound:!1,duration:.5}),l.a.to(".scene.scene0",{autoAlpha:0})]),t.add([l.a.set("#circle1",{autoAlpha:0}),l.a.set(".scene.scene1",{autoAlpha:1})]),t.add((function(){g.current.play()})),g.current.add([l.a.timeline().staggerFromTo(e,.6,{scale:1,autoRound:!1},{scale:1.1,autoRound:!1,ease:"power1.out"},.3),l.a.timeline().staggerFromTo(e,.6,{scale:1.1,autoRound:!1},{scale:1,autoRound:!1,delay:.6,ease:"power1.in"},.3)])},A=function(){g.current&&g.current.clear(),g.current=l.a.timeline({repeat:-1,paused:!0});var e=l.a.timeline();l.a.set("#circle1",{r:4,autoAlpha:0}),l.a.set(".svgCircle",{autoAlpha:0}),l.a.set("#mainCircle",{scale:1}),e.add(l.a.to(".scene2",{autoAlpha:0})),e.add([l.a.to(".scene3",{autoAlpha:1})]);var t=Array.from(document.querySelectorAll(".svgCircle")).reverse();e.add((function(){g.current.play()})),e.add([l.a.timeline().staggerTo(t,.6,{autoAlpha:1},.3)]),g.current.add([l.a.timeline().staggerFromTo(t,.6,{scale:1,autoRound:!1},{scale:1.1,autoRound:!1,ease:"power1.out"},.3),l.a.timeline().staggerFromTo(t,.6,{scale:1.1,autoRound:!1},{scale:1,autoRound:!1,delay:.6,ease:"power1.in"},.3)])},w=function(){var e=l.a.timeline();l.a.set(".shakeEffect g",{stroke:"Day"===v?"#000000":"#FFFFFF"}),e.add(l.a.to(".mobileIcon",{rotate:10,ease:u.a.easeOut,duration:.1})),e.add([l.a.to(".shakeEffect",{autoAlpha:1,duration:.25}),l.a.to(".mobileIcon",{rotate:-15,duration:.25})]),e.add([l.a.to(".shakeEffect",{autoAlpha:0,duration:.15}),l.a.to(".mobileIcon",{rotate:0,ease:u.a.easeOut,duration:.15})])};return Object(r.useEffect)((function(){y(),document.addEventListener("click",(function(e){}))}),[]),Object(r.useEffect)((function(){d&&(F.current=f({host:"localhost:3003",eventEmitters:[{emitter:"joinRoom",data:e,ack:function(e){console.log("joinRoomAck",e)}}],eventListeners:[{listener:"gameStage",callback:function(e){console.log("gameStage",e)}},{listener:"gameResult",callback:function(e){console.log("gameResult",e)}},{listener:"playersInfo",callback:function(e){console.log("playersInfo",e)}},{listener:"gameChoice",callback:function(e){console.log("gameChoice",e)}},{listener:"gameSelected",callback:function(e){console.log("gameSelected",e)}}]}),k())}),[d]),Object(r.useEffect)((function(){w()}),[o]),Object(s.jsxs)("div",{id:"gameMain",children:[Object(s.jsx)("div",{className:"background",children:Object(s.jsx)("svg",{viewBox:"0 0 10 10",children:Object(s.jsxs)("g",{id:"mainCircle",children:[new Array(11).fill(0).map((function(e,t){return Object(s.jsx)("rect",{id:"circle".concat(t+2),className:"svgCircle",rx:"100",x:5-(27-2*t)/2,y:5-(27-2*t)/2,width:27-2*t,height:27-2*t,fill:t%2?"#000000":"#FFFFFF"},t)})),Object(s.jsx)("circle",{id:"circle1",cx:"5",cy:"5",r:"4",fill:"none",stroke:"#000000",strokeWidth:"1"}),Object(s.jsx)("circle",{id:"circleBackground",cx:"5",cy:"5",r:"0",fill:"none"})]})})}),Object(s.jsx)("div",{className:"reset",style:{position:"absolute",bottom:0,right:0,background:"#FFF",zIndex:99},onPointerDown:y,children:"reset"}),Object(s.jsx)("div",{className:"debug",style:{position:"absolute",top:0,left:0,background:"#FFF",zIndex:99},onPointerDown:function(){return b(0)},children:o}),Object(s.jsx)("div",{className:"scene scene0",children:Object(s.jsx)("div",{className:"joinGameButton",onPointerDown:function(){m(),k()},children:"Join Game"})}),Object(s.jsx)("div",{className:"scene scene1",onPointerDown:function(){g.current&&g.current.clear();var e=l.a.timeline();e.add([l.a.set(".scene2 .option",{scale:0,color:"transparent"})]),e.add(l.a.to("#mainCircle",{scale:4,transformOrigin:"center",duration:.5})),e.add(l.a.to(".scene1",{autoAlpha:0})),e.add(l.a.to(".scene2",{autoAlpha:1})),e.add([l.a.to(".scene2 .option1",{scale:1}),l.a.to(".scene2 .option2",{scale:1})]),e.add([l.a.to(".scene2 .option1",{color:"#000000"}),l.a.to(".scene2 .option2",{color:"#FFFFFF"})])},children:Object(s.jsx)("div",{className:"centerText",children:"Wait for other players ..."})}),Object(s.jsxs)("div",{className:"scene scene2",children:[Object(s.jsx)("div",{className:"centerText",children:"Which look would you like to do?"}),Object(s.jsx)("div",{className:"option option1",onPointerDown:function(){O("Day"),A()},children:"Day"}),Object(s.jsx)("div",{className:"option option2",onPointerDown:function(){O("Night"),A()},children:"Night"})]}),Object(s.jsx)("div",{className:"scene scene3",onPointerDown:function(){g.current&&g.current.clear();var e=l.a.timeline();l.a.set("#circle1",{r:4,autoAlpha:0}),l.a.set("#circle1",{r:"Day"===v?3.5:4.2,autoAlpha:0}),l.a.to("#mainCircle",{scale:2}),e.add(l.a.to(".scene3",{autoAlpha:0})),e.add([l.a.fromTo(".scene4",{autoAlpha:0,color:"transparent"},{autoAlpha:1,color:"Day"===v?"#000000":"#FFFFFF"}),l.a.fromTo("#circleBackground",{r:0,fill:"Day"===v?"#FFFFFF":"#000000"},{autoRound:!1,r:2.5})])},children:Object(s.jsx)("div",{className:"centerText",children:"Loading..."})}),Object(s.jsx)("div",{className:"scene scene4",onPointerDown:function(){g.current&&g.current.clear();var e=l.a.timeline();e.add(l.a.to(".scene4",{autoAlpha:0})),e.add(l.a.to(".scene5",{autoAlpha:1})),l.a.set(".scene5 .centerText",{color:"Day"===v?"#000000":"#FFFFFF"}),e.add(l.a.fromTo(".scene5 .centerText",{text:{value:3},y:"-50%",scale:0,autoAlpha:0},{y:"-50%",scale:1,autoAlpha:1,duration:1})),e.add(l.a.fromTo(".scene5 .centerText",{text:{value:2},y:"-50%",scale:0,autoAlpha:0},{y:"-50%",scale:1,autoAlpha:1,duration:1})),e.add(l.a.fromTo(".scene5 .centerText",{text:{value:1},y:"-50%",scale:0,autoAlpha:0},{y:"-50%",scale:1,autoAlpha:1,duration:1}))},children:Object(s.jsxs)("div",{className:"centerText",children:[Object(s.jsx)("div",{className:"resultTitle",children:"The look we are doing is..."}),Object(s.jsxs)("div",{className:"resultText",children:[v,"!"]})]})}),Object(s.jsx)("div",{className:"scene scene5",onPointerDown:function(){var e=l.a.timeline();l.a.set(".scene6 .centerText",{color:"Day"===v?"#000000":"#FFFFFF"}),e.add(l.a.to(".scene5",{autoAlpha:0})),e.add(l.a.to(".scene6",{autoAlpha:1}))},children:Object(s.jsx)("div",{className:"centerText"})}),Object(s.jsx)("div",{className:"scene scene6",children:Object(s.jsxs)("div",{className:"centerText",children:[Object(s.jsx)("svg",{viewBox:"0 0 35 23",className:"shakeEffect shakeEffect1",children:Object(s.jsxs)("g",{stroke:"#FFF",fill:"none",strokeWidth:"3",children:[Object(s.jsx)("path",{d:"M153.28 463.88l1.277-.34c7.393-1.973 14.995 2.385 17.029 9.762h0",transform:"translate(-141 -459) rotate(-177 162.433 466.64)"}),Object(s.jsx)("path",{d:"M142.736 467.692l2.32-.619c13.321-3.55 27.013 4.3 30.68 17.589h0",transform:"translate(-141 -459) rotate(-177 159.236 472.662)"})]})}),Object(s.jsx)("svg",{viewBox:"0 0 35 23",className:"shakeEffect shakeEffect2",children:Object(s.jsxs)("g",{stroke:"#FFF",fill:"none",strokeWidth:"3",children:[Object(s.jsx)("path",{d:"M153.28 463.88l1.277-.34c7.393-1.973 14.995 2.385 17.029 9.762h0",transform:"translate(-141 -459) rotate(-177 162.433 466.64)"}),Object(s.jsx)("path",{d:"M142.736 467.692l2.32-.619c13.321-3.55 27.013 4.3 30.68 17.589h0",transform:"translate(-141 -459) rotate(-177 159.236 472.662)"})]})}),Object(s.jsxs)("svg",{className:"mobileIcon",viewBox:"0 0 90 157",onPointerDown:w,children:[Object(s.jsx)("rect",{width:"90",height:"157",fill:"#FFF",rx:"2",stroke:"#000"}),Object(s.jsx)("rect",{width:"81",height:"121",x:"5",y:"14",fill:"#000",rx:"2"}),Object(s.jsx)("circle",{cx:"45",cy:"146",r:"6.5",stroke:"#000"})]}),Object(s.jsx)("div",{onPointerDown:function(){var e=l.a.timeline();e.add(l.a.to(".scene6",{autoAlpha:0})),e.add(l.a.to(".scene7",{autoAlpha:1})),l.a.set(".scene7 .centerText",{color:"Day"===v?"#000000":"#FFFFFF"}),e.add(l.a.fromTo(".scene7 .centerText",{text:{value:3},y:"-50%",scale:0,autoAlpha:0},{y:"-50%",scale:1,autoAlpha:1,duration:1})),e.add(l.a.fromTo(".scene7 .centerText",{text:{value:2},y:"-50%",scale:0,autoAlpha:0},{y:"-50%",scale:1,autoAlpha:1,duration:1})),e.add(l.a.fromTo(".scene7 .centerText",{text:{value:1},y:"-50%",scale:0,autoAlpha:0},{y:"-50%",scale:1,autoAlpha:1,duration:1}))},children:"Shake!"})]})}),Object(s.jsx)("div",{className:"scene scene7",onPointerDown:function(){var e=l.a.timeline();l.a.set(".scene8 .centerText",{color:"Day"===v?"#000000":"#FFFFFF"}),e.add(l.a.to(".scene7",{autoAlpha:0})),e.add(l.a.to(".scene8",{autoAlpha:1}))},children:Object(s.jsx)("div",{className:"centerText"})}),Object(s.jsx)("div",{className:"scene scene8",children:Object(s.jsxs)("div",{className:"centerText",children:[Object(s.jsx)("svg",{viewBox:"0 0 35 23",className:"shakeEffect shakeEffect1",children:Object(s.jsxs)("g",{stroke:"#FFF",fill:"none",strokeWidth:"3",children:[Object(s.jsx)("path",{d:"M153.28 463.88l1.277-.34c7.393-1.973 14.995 2.385 17.029 9.762h0",transform:"translate(-141 -459) rotate(-177 162.433 466.64)"}),Object(s.jsx)("path",{d:"M142.736 467.692l2.32-.619c13.321-3.55 27.013 4.3 30.68 17.589h0",transform:"translate(-141 -459) rotate(-177 159.236 472.662)"})]})}),Object(s.jsx)("svg",{viewBox:"0 0 35 23",className:"shakeEffect shakeEffect2",children:Object(s.jsxs)("g",{stroke:"#FFF",fill:"none",strokeWidth:"3",children:[Object(s.jsx)("path",{d:"M153.28 463.88l1.277-.34c7.393-1.973 14.995 2.385 17.029 9.762h0",transform:"translate(-141 -459) rotate(-177 162.433 466.64)"}),Object(s.jsx)("path",{d:"M142.736 467.692l2.32-.619c13.321-3.55 27.013 4.3 30.68 17.589h0",transform:"translate(-141 -459) rotate(-177 159.236 472.662)"})]})}),Object(s.jsxs)("svg",{className:"mobileIcon",viewBox:"0 0 90 157",onPointerDown:w,children:[Object(s.jsx)("rect",{width:"90",height:"157",fill:"#FFF",rx:"2",stroke:"#000"}),Object(s.jsx)("rect",{width:"81",height:"121",x:"5",y:"14",fill:"#000",rx:"2"}),Object(s.jsx)("circle",{cx:"45",cy:"146",r:"6.5",stroke:"#000"})]}),Object(s.jsx)("div",{onPointerDown:function(){var e=l.a.timeline();e.add([l.a.to("#mainCircle",{scale:4,autoAlpha:0}),l.a.to(".scene8",{autoAlpha:0})]),e.add(l.a.to(".scene9",{autoAlpha:1}))},children:"Shake!"})]})}),Object(s.jsx)("div",{className:"scene scene9",children:Object(s.jsxs)("div",{className:"centerText",children:[Object(s.jsx)("img",{id:"logo",src:"./media/logo.svg",alt:"SEPHORA"}),Object(s.jsx)("div",{className:"coupon",children:Object(s.jsx)("img",{src:"./media/coupon.jpg",alt:"coupon"})}),Object(s.jsxs)("div",{className:"disclaimer",children:["Offer is valid once per member during Jan 6 - 31, 2021 at in Sephora Hong Kong K-11 Art Mall store. Offer is not valid with other discounts and promotion, gift cards, services, charitable items or any other exclusions mentioned in-store, on ",Object(s.jsx)("a",{href:"https://sephora.hk",target:"_blank",children:"sephora.hk"})," and/or and Sephora Hong Kong mobile app."]})]})})]})}},33:function(e,t,a){},87:function(e,t){}}]);
//# sourceMappingURL=1.5ce751e8.chunk.js.map